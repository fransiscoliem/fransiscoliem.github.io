<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
  content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Ratestaurant</title>
  <link href="https://fonts.googleapis.com/css?family=Antic|Questrial&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Dosis|Libre+Franklin&display=swap" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="semantic/dist/semantic.min.css">
  <link href="https://fonts.googleapis.com/css?family=Merriweather&display=swap" rel="stylesheet">

  <link rel="stylesheet" type="text/css" href="/src/css/app.css">
  <script
  src="https://code.jquery.com/jquery-3.1.1.min.js"
  integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
  crossorigin="anonymous"></script>
  <script src="semantic/dist/semantic.min.js"></script>
  <link rel="manifest" href="/manifest.json">
  <script>
    //prefixes of implementation that we want to test
         window.indexedDB = window.indexedDB || window.mozIndexedDB || 
         window.webkitIndexedDB || window.msIndexedDB;
         
         //prefixes of window.IDB objects
         window.IDBTransaction = window.IDBTransaction || 
         window.webkitIDBTransaction || window.msIDBTransaction;
         window.IDBKeyRange = window.IDBKeyRange || window.webkitIDBKeyRange || 
         window.msIDBKeyRange
         
         if (!window.indexedDB) {
          window.alert("Your browser doesn't support a stable version of IndexedDB.")
        }

        var db;
        var request = window.indexedDB.open("new_database", 1);

        request.onerror = function(event) {
          console.log("error: ");
        };

        request.onsuccess = function(event) {
          db = request.result;
          console.log("success: "+ db);
        };

        request.onupgradeneeded = function(event) {
          var db = event.target.result;
          var objectStore = db.createObjectStore("saved_likes", {keyPath: "restaurant_id"});
       }

          function readAll() {
            var objectStore = db.transaction("employee").objectStore("employee");
            
            objectStore.openCursor().onsuccess = function(event) {
             var cursor = event.target.result;

             if (cursor) {
              alert("Name for id " + cursor.key + " is " + cursor.value.name + ", Age: " + cursor.value.age + ", Email: " + cursor.value.email);
              cursor.continue();
            } else {
              alert("No more entries!");
            }
          };
        }

       //  function save_database(id, name, cuisine, address) {
       //   var request = db.transaction(["likes"], "readwrite")
       //    .objectStore("likes")
       //    .put({ restaurant_id: id, restaurant_name: name, restaurant_cuisine: cuisine, restaurant_address: address });

       //    request.onsuccess = function(event) {
       //     alert(name+" has been added to your database.");
       //   };

       //   request.onerror = function(event) {
       //     alert("Unable to add data\r\nKenny is aready exist in your database! ");
       //   }
       // }
       

  </script>
</head>
<body>

  <div class="ui teal fixed inverted menu compact">
    <div class="center aligned item">
      <h4>Cari Makan Yuk!</h4>
    </div>
    <div class="right menu">
      <a class="item">
        Likes
      </a>
    </div>
    <!-- <div class="ui fluid action input">
      <input type="text" placeholder="Search...">
      <div class="ui button">Search</div>
    </div> -->
  </div>
  <br>
  <div class="ui icon message">
    <div class="content">
      <div class="ui fluid icon input">
        <input type="text" placeholder="Search..." label="search" id="search-text">
       
        <button class="ui icon button" name="btnSearch" role="button" aria-label="btn" id="search-button">
         <i class="search icon"></i>
      </button>
      </div>
    </div>
  </div>

  <div class="ui modal">
    <i class="close icon"></i>
    <div class="header" id="detail-title">
      
    </div>
    <div class="image content">
      <div class="ui medium image">
        <img src="" id="detail-image">
      </div>
      <div class="description">
        <div class="ui header" style="font-family: 'Dosis', sans-serif;">Restaurant Detail : </div>
        <table class="ui very basic table">
            <tbody>
              <tr>
                <td>Cuisine</td>
                <td id="detail-cuisine"></td>
              </tr>
              <tr>
                <td>Address</td>
                <td id="detail-address"></td>
              </tr>
              <tr>
               <td>Rating</td>
                <td id="detail-rating"></td>
              </tr>
              <tr>
               <td>Average Cost</td>
                <td id="detail-average"></td>
              </tr>
               <tr>
               <td>Online Delivery</td>
                <td id="detail-delivery"></td>
              </tr>
               <tr>
               <td>Table Booking</td>
                <td id="detail-booking"></td>
              </tr>
            </tbody>
          </table>
      <!--   <p id="detail-address"></p>
        <p id="detail-rating"></p>
        <p id="detail-average"></p> -->
      </div>
    </div>
    <div class="actions">
      <div class="ui black deny button">
        Close
      </div>
      <div class="ui positive right labeled icon button" id="save-button">
        Save
        <i class="checkmark icon"></i>
      </div>
    </div>
  </div>

  <div class="flex-container" id="places-home">

  </div>
  <h1>asdasddas</h1>
  <script src="/src/js/promise.js"></script>
  <script src="/src/js/fetch.js"></script>
  <script src="/src/js/app.js"></script>
  <script src="/src/js/feed.js"></script>
  <script>
    function save_database() {
          var id = window.localStorage.getItem('idRest');
          var cuisine = document.getElementById("detail-cuisine").innerHTML;
          var name = document.getElementById("detail-title").innerHTML;
          var address = document.getElementById("detail-address").innerHTML;
          var request = db.transaction(["saved_likes"], "readwrite")
          .objectStore("saved_likes")
          .add({ restaurant_id: 'id', restaurant_name: 'name', restaurant_cuisine: 'cuisine', restaurant_address: 'address' });

          request.onsuccess = function(event) {
           alert(name+" has been added to your database.");
           console.log(id + name + cuisine + address);
         };

         request.onerror = function(event) {
           alert("Unable to add data\r\nKenny is aready exist in your database! ");
         }
       }
  </script>
</body>
</html>